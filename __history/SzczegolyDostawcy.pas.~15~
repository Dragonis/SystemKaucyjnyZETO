unit SzczegolyDostawcy;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Data.DB, Vcl.Grids,
  Vcl.DBGrids, Datasnap.DBClient;

type
  TSzczegolyDostawcyForm = class(TForm)
    Label1: TLabel;
    Label2: TLabel;
    NazwaDostawcyLabel: TLabel;
    SrotDostawcyLabel: TLabel;
    Label5: TLabel;
    NrFakturyEdit: TEdit;
    DBGrid1: TDBGrid;
    ZapiszButton: TButton;
    ClientDataSet1: TClientDataSet;
    DataSource1: TDataSource;
    procedure FormKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
      procedure SetDostawcaInfo(const Nazwa, Skrot: string);
    { Public declarations }
  end;

var
  SzczegolyDostawcyForm: TSzczegolyDostawcyForm;

implementation

{$R *.dfm}

procedure TSzczegolyDostawcyForm.FormCreate(Sender: TObject);
begin


  // --- Tworzymy dataset ---
  ClientDataSet1.Close;
  ClientDataSet1.FieldDefs.Clear;

  // Dodajemy pola
  with ClientDataSet1.FieldDefs.AddFieldDef do
  begin
    Name := 'ID';
    DataType := ftInteger;
  end;

  with ClientDataSet1.FieldDefs.AddFieldDef do
  begin
    Name := 'Nazwa';
    DataType := ftString;
    Size := 100;
  end;

  with ClientDataSet1.FieldDefs.AddFieldDef do
  begin
    Name := 'Ilosc';
    DataType := ftInteger;
  end;

  with ClientDataSet1.FieldDefs.AddFieldDef do
  begin
    Name := 'Cena';
    DataType := ftFloat;
  end;

  // Tworzymy dataset w pamiêci
  ClientDataSet1.CreateDataSet;

  // --- Pod³¹czamy do DBGrid ---
  DBGrid1.DataSource := DataSource1;
  DataSource1.DataSet := ClientDataSet1;

  // --- Tworzymy kolumny w DBGrid ---
  DBGrid1.Columns.Clear;
  //DBGrid1.AutoGenerateColumns := False;

  with DBGrid1.Columns.Add do
  begin
    FieldName := 'ID';
    Title.Caption := 'ID';
  end;

  with DBGrid1.Columns.Add do
  begin
    FieldName := 'Nazwa';
    Title.Caption := 'Nazwa';
  end;

  with DBGrid1.Columns.Add do
  begin
    FieldName := 'Ilosc';
    Title.Caption := 'Iloœæ';
  end;

  with DBGrid1.Columns.Add do
  begin
    FieldName := 'Cena';
    Title.Caption := 'Cena';
  end;

  // --- Opcjonalnie: dodajemy przyk³adowe dane ---
  ClientDataSet1.AppendRecord([1, 'Jab³ko', 10, 2.5]);
  ClientDataSet1.AppendRecord([2, 'Pomarañcza', 5, 3.2]);
  ClientDataSet1.AppendRecord([3, 'Banan', 12, 1.8]);
  ClientDataSet1.AppendRecord([, '<nowa pozycja>', , ]);

   DBGrid1.Columns[1].Width := 80;
end;

procedure TSzczegolyDostawcyForm.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if Key = VK_ESCAPE then
    Close;
end;

procedure TSzczegolyDostawcyForm.SetDostawcaInfo(const Nazwa, Skrot: string);
begin
    NazwaDostawcyLabel.Caption := Nazwa;
   SrotDostawcyLabel.Caption := Skrot;
end;


end.
